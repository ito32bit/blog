---
title: Snap版 LXQt言語パック リリース
date: 2020-01-13
categories: Snap
tags: Snapcraft 翻訳 LXQtデスクトップ環境
---
LXQtの言語パックを Snapパッケージ lxqt-l10n-snap で公開しています。非公式なパッケージです。  
最新の翻訳ファイルで LXQtが日本語表示されるようするため、Snapパッケージを作成しました。

日本語のみでなく世界の言語の表示に対応しています。  
LXQtデスクトップ環境の翻訳を行うサイト ( <https://weblate.lxqt.org/> ) を見ていると、2019年の１年間で新しい言語（マプチェ語、アストゥリアス語など）が翻訳を開始しています。
これらの翻訳が適用されるのは、次のLXQtのリリースまで待たなければなりません。
そこで、このSnapパッケージを使用すれば 直ぐに最新の翻訳で LXQtを使用できます。  
この言語パックを 一度インストールしておけば、開発サイトGithubで翻訳ファイル(.ts)が更新されると、自動でこの言語パックも更新され、いつでも最新の翻訳で表示されます。
翌日か翌々日くらいには最新が表示されます。

是非、世界の LXQtユーザーに使ってもらいたいと思って作成しています。[^fo]  
世界の翻訳状況の図:  
![翻訳状況](https://weblate.lxqt.org/widgets/lxqt/-/horizontal-auto.svg)

[^fo]: どなたか [LXQtのフォーラム](https://forum.lxqt.org/) で このSnapパッケージを（英語で）紹介してもらえないでしょうか？

現在のところ、大きな問題があります。
このため公開を今まで見送っていましたが、公開することにしました。
問題とは、ファイルマネージャーとデスクトップ（壁紙設定など）が最新の日本語表示になりません。[^fm]

[^fm]: Snap や Qt5 がわかる方が いらっしゃいましたら どなたか助けて下さい。

## インストール

<https://snapcraft.io/lxqt-l10n-snap> [^io]

[^io]: Snap store サイトの私の英文、大丈夫ですか。どこがおかしいですか？

GUIの Ubuntuソフトウエア(gnome-software)やスナップストア(snap-store)や KDE Discover からもインストールできます。

#### 端末の場合、次の２つのコマンドを実行後に再ログインします  

```bash
sudo snap install lxqt-l10n-snap --edge
/snap/lxqt-l10n-snap/current/setup
```

２つ目のコマンドは session.conf に環境変数を設定しています。
このコマンドを使わずに（.xsessionrc等に）自分で設定することも出来ます。

```bash
export XDG_CONFIG_DIRS=/snap/lxqt-l10n-snap/current/etc/xdg:$XDG_CONFIG_DIRS
export XDG_DATA_DIRS=/snap/lxqt-l10n-snap/current/usr/share:$XDG_DATA_DIRS
```

## 既知の問題

※チェックされている項目は修正して Edgeチャンネルへ リリース済みです。

- [ ] ファイルマネージャーとデスクトップマネージャーが最新の日本語表示にならない (PCManFM-Qt)
- [ ] パネルのプラグインの名前と説明が最新の日本語表示にならない
- [ ] アプリケーションメニューのディレクトリ名（Leave 等）が最新の日本語表示にならない
- [x] LXQtセッションの LXQtモジュール名が最新の日本語表示にならない

## 技術情報 内部の仕組み

このSnapは、`/snap/lxqt-l10n-snap/` ディレクトリにインストールされます。
この中に `*.qm` や `*.desktop` や `*.directory` ファイルが配置されます。  
コマンド `/snap/lxqt-l10n-snap/current/setup` で `$HOME/.config/lxqt/session.conf` 内の環境変数を設定します。

環境変数 `XDG_DATA_DIRS` に Snapのディレクトリを追加して、アプリが `*.qm` ファイルを参照するようにしています。
アプリケーションメニューも この環境変数を参照しています。
しかし `*.directory` も配置してありますが、参照されないようです。  
それから PCManFM-QTは、この環境変数を見ていないかも知れません。

LXQt設定の セッションの LXQtモジュール名については、環境変数 `XDG_CONFIG_DIRS` に Snapのディレクトリを追加して `*.desktop` を参照するようにしています。

## 関連ページ

- [Snapパッケージとは]({{ site.baseurl }}{% post_url 2019-12-28-snap-package %})
- [LXQtを最新の日本語表示にする]({{ site.baseurl }}{% post_url 2020-01-13-lxqt-japanese %})

***
